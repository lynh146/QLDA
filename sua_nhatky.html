<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Sửa Nhật Ký</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body class="container mt-4">

  <h3 class="mb-3">Sửa Nhật Ký</h3>

  <form id="editForm" method="post" action="php/sua_nhatky.php">
    <div class="mb-3">
      <label class="form-label">Mã Nhật Ký</label>
      <input type="text" name="MaNK" id="MaNK" class="form-control" readonly>
    </div>
    <div class="mb-3">
      <label class="form-label">Mã Lô</label>
      <input type="text" name="MaLo" id="MaLo" class="form-control">
    </div>
    <div class="mb-3">
      <label class="form-label">Ngày Ghi</label>
      <input type="date" name="NgayGhi" id="NgayGhi" class="form-control">
    </div>
    <div class="mb-3">
      <label class="form-label">Nội Dung</label>
      <textarea name="NoiDung" id="NoiDung" class="form-control" rows="3"></textarea>
    </div>
    <div class="mb-3">
      <label class="form-label">Trạng Thái</label>
      <input type="text" name="TrangThai" id="TrangThai" class="form-control">
    </div>
    <button type="submit" class="btn btn-primary">Lưu thay đổi</button>
    <a href="danh_sach_nhatky.html" class="btn btn-secondary">Quay lại</a>
  </form>

<script>
$(document).ready(function(){
  const urlParams = new URLSearchParams(window.location.search);
  const mank = urlParams.get("id");

  $.getJSON("php/lay_thong_tin_nhatky.php", function(data){
    const record = data.find(item => item.MaNK === mank);
    if (record) {
      $("#MaNK").val(record.MaNK);
      $("#MaLo").val(record.MaLo);
      $("#NgayGhi").val(record.NgayGhi);
      $("#NoiDung").val(record.NoiDung);
      $("#TrangThai").val(record.TrangThai);
    } else {
      alert("Không tìm thấy dữ liệu cần sửa");
      window.location.href = "danh_sach_nhatky.html";
    }
  });
});
</script>

</body>
</html>
