<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Dashboard Admin</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" rel="stylesheet">
<style>
body { background-color: #f8f9fc; }
.sidebar { min-height: 100vh; background-color: #0d6efd; }
.sidebar .nav-link { color: #fff; font-weight: 500; }
.sidebar .nav-link.active { background-color: rgba(255,255,255,0.2); border-radius: .25rem; }
.card-stat { border-left: .25rem solid #0d6efd; box-shadow: 0 0.15rem 1.75rem 0 rgba(58,59,69,.15); }
.card-stat h6 { font-weight: 700; text-transform: uppercase; font-size: .8rem; color: #0d6efd; }
</style>
</head>
<body>

<div class="d-flex">
    <!-- Sidebar -->
    <div class="sidebar p-3">
    <h4 class="text-white mb-4"><i class="fa-solid fa-user-shield me-2"></i>Admin</h4>
    <nav class="nav flex-column">
      <a class="nav-link active" href="/QLVT1/views/admin/dashboard.html"><i class="fa-solid fa-gauge me-2"></i>Dashboard</a>
      <a class="nav-link" href="/QLVT1/views/admin/danh_sach_nongdan.html"><i class="fa-solid fa-users me-2"></i>Quản lý Nông dân</a>
      <a class="nav-link" href="/QLVT1/views/admin/danh_sach_vuon.html"><i class="fa-solid fa-tree me-2"></i>Quản lý Vườn</a>
      <a class="nav-link" href="/QLVT1/views/admin/danh_sach_losx.html"><i class="fa-solid fa-lemon me-2"></i>Quản lý Lô SX</a>
      <a class="nav-link" href="/QLVT1/views/admin/danh_sach_thuhoach.html"><i class="fa-solid fa-basket-shopping me-2"></i>Quản lý Thu hoạch</a>
      <a class="nav-link" href="/QLVT1/views/admin/danh_sach_giong.html"><i class="fa-solid fa-seedling me-2"></i>Giống cây</a>
      <a class="nav-link" href="/QLVT1/views/admin/danh_sach_phanbon.html"><i class="fa-solid fa-flask me-2"></i>Phân bón</a>
      <a class="nav-link" href="/QLVT1/views/admin/danh_sach_thuoc.html"><i class="fa-solid fa-spray-can me-2"></i>Thuốc</a>
      <a class="nav-link" href="/QLVT1/views/admin/danh_sach_thietbi.html"><i class="fa-solid fa-gear me-2"></i>Thiết bị</a>
      <a class="nav-link" href="/QLVT1/views/admin/danh_sach_thoitiet.html"><i class="fa-solid fa-file-alt me-2"></i>Báo cáo</a>
      <a class="nav-link" href="/QLVT1/views/admin/danh_sach_baocao.html"><i class="fa-solid fa-file-alt me-2"></i>Báo cáo</a>
      <a class="nav-link" href="/QLVT1/views/admin/danh_sach_chiphi.html"><i class="fa-solid fa-coins me-2"></i>Chi phí</a>
      <a class="nav-link" href="/QLVT1/views/admin/danh_sach_truyxuat.html"><i class="fa-solid fa-barcode me-2"></i>Truy xuất</a>
      <a class="nav-link" href="/QLVT1/views/admin/danh_sach_lichct.html"><i class="fa-solid fa-calendar-days me-2"></i>Lịch canh tác</a>
      <a class="nav-link text-warning mt-3" href="../../php/logout.php">
        <i class="fa-solid fa-right-from-bracket me-2"></i>Đăng xuất
      </a>
    </nav>
</div>

    <!-- Main Content -->
    <div class="flex-grow-1 p-4">
        <h2 class="mb-4 fw-bold text-primary"><i class="fa-solid fa-gauge me-2"></i>Bảng điều khiển Admin</h2>
        
        <!-- Stats Row -->
        <div class="row g-4 mb-4">
            <div class="col-md-3">
                <div class="card card-stat p-3">
                    <h6>Tổng Nông dân</h6>
                    <div class="h4 mb-0" id="statND">0</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card card-stat p-3">
                    <h6>Tổng Vườn</h6>
                    <div class="h4 mb-0" id="statVuon">0</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card card-stat p-3">
                    <h6>Tổng Lô SX</h6>
                    <div class="h4 mb-0" id="statLo">0</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card card-stat p-3">
                    <h6>Sản lượng (tấn)</h6>
                    <div class="h4 mb-0" id="statThuHoach">0</div>
                </div>
            </div>
        </div>

        <!-- Welcome Card -->
        <div class="card shadow-sm">
            <div class="card-body">
                <h5 class="fw-bold text-primary">Xin chào, <span id="adminName">Admin</span>!</h5>
                <p>Bảng điều khiển này cho phép bạn quản lý toàn bộ hệ thống: nông dân, vườn, lô sản xuất, thu hoạch, phân bón, thuốc và thiết bị.</p>
            </div>
        </div>
    </div>
</div>

<script>
fetch('../../api/admin/get_stats.php')
  .then(res => res.json())
  .then(data => {
    document.getElementById('statND').textContent = data.nongdan || 0;
    document.getElementById('statVuon').textContent = data.vuon || 0;
    document.getElementById('statLo').textContent = data.losx || 0;
    document.getElementById('statThuHoach').textContent = data.thuhoach || 0;
    if(data.name) document.getElementById('adminName').textContent = data.name;
  })
  .catch(err => console.error(err));
</script>

</body>
</html>
