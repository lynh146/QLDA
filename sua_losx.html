<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Sửa Lô Sản Xuất</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body class="container mt-4">

  <h3 class="mb-3">Sửa Lô Sản Xuất</h3>

  <form id="editForm" method="post" action="php/sua_losx.php">
    <div class="mb-3">
      <label class="form-label">Mã Lô (khóa chính)</label>
      <input type="text" name="MaLo" id="MaLo" class="form-control" readonly>
    </div>
    <div class="mb-3">
      <label class="form-label">Mã Vườn</label>
      <input type="text" name="MaVuon" id="MaVuon" class="form-control">
    </div>
    <div class="mb-3">
      <label class="form-label">Mã Giống</label>
      <input type="text" name="MaGiong" id="MaGiong" class="form-control">
    </div>
    <div class="mb-3">
      <label class="form-label">Diện tích</label>
      <input type="number" step="0.01" name="DienTich" id="DienTich" class="form-control">
    </div>
    <div class="mb-3">
      <label class="form-label">Ngày bắt đầu</label>
      <input type="date" name="NgayBD" id="NgayBD" class="form-control">
    </div>
    <div class="mb-3">
      <label class="form-label">Ngày kết thúc</label>
      <input type="date" name="NgayKT" id="NgayKT" class="form-control">
    </div>
    <button type="submit" class="btn btn-primary">Lưu thay đổi</button>
    <a href="danh_sach_losx.html" class="btn btn-secondary">Quay lại</a>
  </form>

<script>
$(document).ready(function(){
  const urlParams = new URLSearchParams(window.location.search);
  const malo = urlParams.get("id");

  $.getJSON("php/lay_thong_tin_losx.php", function(data){
    const record = data.find(item => item.MaLo === malo);
    if (record) {
      $("#MaLo").val(record.MaLo);
      $("#MaVuon").val(record.MaVuon);
      $("#MaGiong").val(record.MaGiong);
      $("#DienTich").val(record.DienTich);
      $("#NgayBD").val(record.NgayBD);
      $("#NgayKT").val(record.NgayKT);
    } else {
      alert("Không tìm thấy dữ liệu cần sửa");
      window.location.href = "danh_sach_losx.html";
    }
  });
});
</script>

</body>
</html>
